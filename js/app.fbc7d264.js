(function(t){function e(e){for(var r,s,i=e[0],l=e[1],c=e[2],m=0,d=[];m<i.length;m++)s=i[m],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3a2f":function(t,e,n){"use strict";var r=n("59e8"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s=n("2877"),i={},l=Object(s["a"])(i,a,o,!1,null,null,null),c=l.exports,u=(n("45fc"),n("8c4f")),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-1 m-0 shadow",staticStyle:{height:"50px"}},[n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},on:{click:t.toggleSidebar}},[n("span",{staticClass:"navbar-toggler-icon"})]),n("router-link",{staticClass:"navbar-brand pl-2",attrs:{to:{name:"home"}}},[t._v(" AdminPanel ")]),n("div",{staticClass:"ml-auto"},[n("ul",{staticClass:"navbar-nav flex-row"},[n("li",{staticClass:"nav-item mx-1 pa-1"},[t.$store.getters["userInfo"]?n("router-link",{staticClass:"nav-link",attrs:{to:{name:"profile"}}},[t._v(" "+t._s(t.$store.getters["userInfo"].name)+" ")]):t._e()],1),n("li",{staticClass:"nav-item mx-1"},[n("a",{staticClass:"nav-link",attrs:{href:"/"},on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("logout")}}},[t._v(" Выход ")])])])])],1),n("div",{staticClass:"wrapper"},[n("nav",{attrs:{id:"sidebar"}},[n("div",{staticStyle:{position:"sticky",top:"50px"}},[t._m(0),n("ul",{staticClass:"list-unstyled"},[t._l(t.menuList,(function(t,e){return[n("sidebar-item",{key:e,attrs:{item:t}})]}))],2)])]),n("div",{attrs:{id:"content"}},[t.$route.meta&&t.$route.meta.breadcrumbs&&t.$route.meta.breadcrumbs.length?n("div",{staticClass:"breadcrumb-sticky bg-light pt-2 pb-2 mb-3 border-bottom",staticStyle:{position:"sticky",top:"50px"}},[n("nav",{staticClass:"px-3",attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb p-1 mb-0 bg-transparent"},t._l(t.$route.meta.breadcrumbs,(function(e,r){return n("li",{key:r,staticClass:"breadcrumb-item",class:[].concat(e.toName===t.$route.name&&["active"])},[e.toName&&e.toName!==t.$route.name?n("router-link",{attrs:{to:{name:e.toName}}},[t._v(" "+t._s(e.title)+" ")]):[t._v(" "+t._s(e.title)+" ")]],2)})),0)])]):t._e(),n("router-view")],1)])])},d=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sidebar-header d-flex"},[r("div",{staticClass:"m-auto p-1"},[r("img",{attrs:{src:n("cf05"),width:"50px"}})])])}],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:[].concat(t.item.to&&t.item.to.name===t.$route.name&&["active"])},[t.item.to?n("router-link",{staticClass:"px-3",attrs:{to:t.item.to}},[t._v(t._s(t.item.title)+" ")]):n("a",{staticClass:"dropdown-toggle px-3",attrs:{"data-toggle":"collapse","aria-expanded":"false"},on:{click:function(e){return e.stopPropagation(),t.subMenuToggle(e)}}},[t._v(" "+t._s(t.item.title)+" ")]),t.item.children&&t.subVisible?[n("ul",{staticClass:"list-unstyled"},t._l(t.item.children,(function(e,r){return n("li",{key:r,class:[].concat(e.to&&e.to.name===t.$route.name&&["active"])},[n("router-link",{attrs:{to:e.to}},[t._v(t._s(e.title))])],1)})),0)]:t._e()],2)},p=[],h={name:"SidebarItem",props:{item:{type:Object,required:!0}},data:function(){return{subVisible:!1}},methods:{subMenuToggle:function(){this.subVisible=!this.subVisible}}},v=h,b=Object(s["a"])(v,f,p,!1,null,null,null),g=b.exports,_={name:"AdminPanel",components:{SidebarItem:g},data:function(){return{menuList:[{title:"Главная",to:{name:"home"}},{title:"CRM",children:[{title:"Контакты",to:{name:"contacts"}}]}]}},methods:{toggleSidebar:function(){document.getElementById("sidebar").classList.toggle("active")}}},x=_,y=Object(s["a"])(x,m,d,!1,null,null,null),C=y.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("form",{staticClass:"form-signin"},[t._m(0),n("label",{staticClass:"mb-0"},[t._v("Имя пользователя")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.login,expression:"form.login"}],staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Имя пользователя",required:"",autofocus:""},domProps:{value:t.form.login},on:{input:function(e){e.target.composing||t.$set(t.form,"login",e.target.value)}}}),n("label",{staticClass:"mb-0"},[t._v("Пароль")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control mb-2",attrs:{type:"password",placeholder:"Пароль",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),n("button",{staticClass:"btn btn-primary btn-block btn-sm",attrs:{disabled:t.sending,type:"submit"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},click:t.submit}},[t.sending?n("spinner",{staticClass:"mr-1",attrs:{color:"white"}}):n("span",[t._v("Войти")])],1),n("div",{staticClass:"text-center"},[t.error?n("small",{staticClass:"form-text text-danger"},[t._v(t._s(t.error))]):t._e()])])])},k=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Авторизация")])])}],N=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"spinner",style:"height: "+t.size+"px"},[n("div",{staticClass:"clip",staticStyle:{background:"transparent","border-style":"solid","border-radius":"100%"},style:t.clipStyle}),n("div",{style:"color:"+t.color},[t._t("text")],2)])}),S=[],$=(n("a9e3"),{name:"Spinner",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#6495ed"},size:{type:Number,default:20},borderWidth:{type:Number,default:2}},computed:{clipStyle:function(){return{width:this.size+"px",height:this.size+"px",borderWidth:this.borderWidth+"px",borderColor:this.color+" "+this.color+" transparent"}}}}),O=$,j=(n("3a2f"),Object(s["a"])(O,N,S,!1,null,"9c63d196",null)),E=j.exports,I={name:"Auth",components:{Spinner:E},data:function(){return{error:"",sending:!1,form:{login:"",password:""}}},methods:{submit:function(){var t=this;this.error="",this.form.login&&this.form.password?(this.sending=!0,this.$store.dispatch("authorization",this.form).then((function(e){e&&t.$router.push({name:"home"})})).finally((function(){t.sending=!1}))):this.error="Заполните обязательные поля"}}},P=I,F=Object(s["a"])(P,w,k,!1,null,null,null),T=F.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-wrap-reverse justify-content-center"},[n("div",{staticStyle:{flex:"1"}},[n("h3",[t._v(" Список контактов ")]),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-bordered table-striped "},[t._m(0),n("tbody",[t.list.length?t._l(t.list,(function(e,r){return n("tr",{key:r,style:Object.assign({},t.loading&&{filter:"blur(2px)"})},[n("th",{staticClass:"text-center",attrs:{scope:"row"}},[t._v(t._s(r+1))]),n("td",[t._v(t._s(e.fullName))]),n("td",[t._v(t._s(e.phone))])])})):!t.list.length&&t.loading?[n("tr",[n("td",{attrs:{colspan:"99"}},[n("spinner",{attrs:{color:"var(--bg-first-color)"}})],1)])]:[t._m(1)]],2)])])]),n("div",{staticClass:"ml-2",staticStyle:{width:"250px",position:"relative"}},[n("filter-block",{on:{change:t.fetchContacts}})],1)])},M=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticClass:"text-center"},[t._v("#")]),n("th",[t._v("ФИО")]),n("th",[t._v("Телефон")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{staticClass:"text-muted text-center",attrs:{colspan:"99"}},[t._v(" Нет данных ")])])}],A=(n("4de4"),n("c975"),n("b0c0"),n("498a"),n("96cf"),n("1da1")),L=function(){var t=3*Math.random()*1e3;return new Promise((function(e){return setTimeout(e,t)}))},q=function(){var t=Object(A["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.login,r=e.password,console.warn("Авторизация пользователя",{login:n,password:r}),t.next=4,L();case 4:return t.abrupt("return",new Promise((function(t){return t({token:"secret",info:{name:n||"Имя пользователя"}})})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=[{fullName:"Александрова Татьяна",phone:"+79270000001"},{fullName:"Белозерцев Александр",phone:"+79270000002"},{fullName:"Богородицкая Елена",phone:"+79270000003"},{fullName:"Великанова Елена",phone:"+79270000004"},{fullName:"Власова Алла",phone:"+79270000005"},{fullName:"Гребенников Павел",phone:"+79270000006"},{fullName:"Захаров Максим",phone:"+79270000007"},{fullName:"Калинкин Андрей",phone:"+79270000008"},{fullName:"Кузнецов Николай",phone:"+79270000009"},{fullName:"Куприенко Нина",phone:"+79270000010"},{fullName:"Лаврова Людмила",phone:"+79270000011"},{fullName:"Минаева Маргарита",phone:"+79270000012"},{fullName:"Менкин Антон",phone:"+79270000013"},{fullName:"Николаенко Татьяна",phone:"+79270000014"},{fullName:"Нишнев Владимир",phone:"+79170000015"},{fullName:"Палагина Людмила",phone:"+79170000016"},{fullName:"Пчелинцев Андрей",phone:"+79170000017"},{fullName:"Романова Людмила",phone:"+79170000018"},{fullName:"Русанова Татьяна",phone:"+79170000019"}],D=function(){var t=Object(A["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.warn("Получаю список контактов",e),t.next=3,L();case 3:return n=e.name,r=void 0===n?"":n,a=e.phone,o=void 0===a?"":a,r=r.toLowerCase().trim(),o=o.toLowerCase().trim(),console.warn("Получаю список контактов",r,o),s=function(t){return o&&t.phone?-1!==t.phone.toLowerCase().indexOf(o):!r||!t.fullName||-1!==t.fullName.toLowerCase().indexOf(r)},t.abrupt("return",new Promise((function(t){return t({list:z.filter(s)})})));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card text-white bg-dark sticky-top",staticStyle:{top:"100px"}},[n("div",{staticClass:"card-header px-3 py-2"},[t._v(" Фильтр ")]),n("div",{staticClass:"card-body px-3 py-2"},[n("form",[n("filter-text-field",{attrs:{"field-name":"Имя","field-placeholder":"Поиск по имени"},on:{input:t.changeField},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}}),n("filter-text-field",{attrs:{"field-name":"Телефон","field-placeholder":"Поиск по номеру телефона"},on:{input:t.changeField},model:{value:t.fields.phone,callback:function(e){t.$set(t.fields,"phone",e)},expression:"fields.phone"}}),t.isDefault?t._e():n("button",{staticClass:"btn btn-secondary btn-block btn-sm",on:{click:t.reset}},[t._v(" Сброс ")])],1)])])},V=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group input-group-sm"},[n("label",[t._v(t._s(t.fieldName))]),n("input",{staticClass:"form-control",attrs:{type:"text",placeholder:t.fieldPlaceholder},domProps:{value:t.value},on:{input:t.handleInput}}),t.fieldDesc?n("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.fieldDesc))]):t._e()])},U=[],W={name:"FilterField",props:{value:{},fieldName:{required:!0},fieldDesc:{default:""},fieldPlaceholder:{default:""}},methods:{handleInput:function(t){this.$emit("input",t.target.value)}}},H=W,G=Object(s["a"])(H,B,U,!1,null,null,null),K=G.exports,Q=n("b047"),X=n.n(Q),Y=function(){return{name:"",phone:""}},Z={name:"Filter",components:{FilterTextField:K},data:function(){return{fields:Y()}},methods:{changeField:function(){this.debounceFilters()},debounceFilters:X()((function(){this.$emit("change",this.fields)}),500),reset:function(){this.fields=Y(),this.changeField()}},computed:{isDefault:function(){for(var t in Y())if(Y()[t]!==this.fields[t])return!1;return!0}}},tt=Z,et=Object(s["a"])(tt,J,V,!1,null,null,null),nt=et.exports,rt={name:"Contacts",components:{FilterBlock:nt,Spinner:E},data:function(){return{loading:!1,list:[]}},methods:{fetchContacts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",phone:""};this.loading=!0,D(e).then((function(e){t.list=e.list})).finally((function(){t.loading=!1}))}},mounted:function(){this.fetchContacts()}},at=rt,ot=Object(s["a"])(at,R,M,!1,null,null,null),st=ot.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Профиль пользователя")]),n("p",[t._v("Информация о пользователе: "+t._s(t.$store.getters["userInfo"]))])])},lt=[],ct={name:"Profile"},ut=ct,mt=Object(s["a"])(ut,it,lt,!1,null,null,null),dt=mt.exports,ft=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},pt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-3"},[n("h2",[t._v("Главная страница админки")]),n("p",[t._v("Дашборд админки")])])}],ht={name:"Home"},vt=ht,bt=Object(s["a"])(vt,ft,pt,!1,null,null,null),gt=bt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-3"},[n("router-view")],1)},xt=[],yt={name:"Root"},Ct=yt,wt=Object(s["a"])(Ct,_t,xt,!1,null,null,null),kt=wt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-3"},[n("router-view")],1)},St=[],$t={name:"Crm"},Ot=$t,jt=Object(s["a"])(Ot,Nt,St,!1,null,null,null),Et=jt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center m-auto py-3",staticStyle:{"max-width":"300px"}},[n("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Ошибка 404")]),n("button",{staticClass:"btn btn-lg btn-primary btn-block btn-sm",attrs:{type:"submit"},on:{click:function(e){return t.$router.push("/")}}},[t._v(" На главную ")])])},Pt=[],Ft={name:"NotFound"},Tt=Ft,Rt=Object(s["a"])(Tt,It,Pt,!1,null,null,null),Mt=Rt.exports,At=n("2f62");r["a"].use(At["a"]);var Lt=new At["a"].Store({state:{userInfo:localStorage.getItem("info")?JSON.parse(localStorage.getItem("info")):null,token:localStorage.getItem("token")?localStorage.getItem("token"):""},mutations:{SET_USER_INFO:function(t,e){var n=e.info,r=void 0===n?null:n,a=e.token,o=void 0===a?"":a;t.userInfo=r,t.token=o}},actions:{authorization:function(t,e){var n=t.commit;return q(e).then((function(t){return!(!t.token||!t.info)&&(n("SET_USER_INFO",t),localStorage.setItem("token",t.token),localStorage.setItem("info",JSON.stringify(t.info)),!0)}))},logout:function(t){var e=t.commit;e("SET_USER_INFO",{}),localStorage.removeItem("token"),localStorage.removeItem("info")}},getters:{isToken:function(t){return!!t.token},userInfo:function(t){return t.userInfo}},modules:{}});r["a"].use(u["a"]);var qt=[{path:"/",component:C,meta:{requiresAuth:!0},children:[{name:"root",path:"/",redirect:{name:"home"},component:kt,children:[{name:"home",path:"/",component:gt,meta:{breadcrumbs:[{title:"Главная",toName:"root"}]}},{name:"profile",path:"profile",component:dt,meta:{breadcrumbs:[{title:"Главная",toName:"root"},{title:"Профиль пользователя",toName:"profile"}]}}]},{name:"crm",redirect:{name:"contacts"},path:"crm",component:Et,children:[{name:"contacts",path:"contacts",component:st,meta:{breadcrumbs:[{title:"Главная",toName:"root"},{title:"CRM",toName:"crm"},{title:"Контакты",toName:"contacts"}]}}]}]},{path:"/auth",name:"Auth",component:T},{path:"/404",name:"404",component:Mt},{path:"*",redirect:"/404"}],zt=new u["a"]({mode:"history",base:"/",routes:qt});zt.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requiresAuth}))?Lt.getters["isToken"]?n():n({name:"Auth"}):n()}));var Dt=zt;n("845f");r["a"].config.productionTip=!1,new r["a"]({router:Dt,store:Lt,render:function(t){return t(c)}}).$mount("#app")},"59e8":function(t,e,n){},"845f":function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.fbc7d264.js.map